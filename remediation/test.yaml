resources:
  - name: yaelRole1
    type: gcp-types/iam-v1:projects.roles
    properties:
      parent: projects/your-project-id
      roleId: yaelRole1
      role:
        title: yaelRole1
        description: Custom role with specific permissions
        includedPermissions:
          - cloudsql.instances.get
          - cloudsql.instances.update
          - compute.firewalls.delete
          - compute.instances.get
          - compute.instances.setLabels
          - compute.instances.stop
          - compute.instances.deleteAccessConfig
          - compute.networks.updatePolicy
          - compute.subnetworks.get
          - compute.subnetworks.setPrivateIpGoogleAccess
          - compute.subnetworks.update
          - container.clusters.update
          - gkemulticloud.awsNodePools.update
          - storage.buckets.getIamPolicy
          - storage.buckets.setIamPolicy

  - name: yaelServiceAccount1
    type: gcp-types/iam-v1:projects.serviceAccounts
    properties:
      accountId: yaelServiceAccount1
      displayName: yaelServiceAccount1

  - name: yaelRoleBinding1
    type: gcp-types/iam-v1:projects.roles.bindings
    properties:
      role: $(ref.yaelRole1.roleId)
      members:
        - serviceAccount:$(ref.yaelServiceAccount1.email)

  - name: yaelFunction1
    type: gcp-types/cloudfunctions-v1:projects.locations.functions
    properties:
      parent: projects/your-project-id/locations/us-central1
      function:
        name: yaelFunction1
        runtime: python37
        sourceArchiveUrl: gs://your-bucket/function.zip
        httpsTrigger: {}
        ingressSettings: ALLOW_ALL
        serviceAccountEmail: $(ref.yaelServiceAccount1.email)
        labels:
          created-by: deployment-manager
        entryPoint: main

  - name: yaelBucket1
    type: gcp-types/storage-v1:buckets
    properties:
      bucket: yaelBucket1
