resources:
  - name: yaelRole2
    type: gcp-types/iam-v1:projects.roles
    properties:
      parent: projects/chkp-gcp-yaelel-box
      roleId: yaelRole2
      role:
        title: yaelRole2
        description: Custom role with specific permissions
        includedPermissions:
          - cloudsql.instances.get
          - cloudsql.instances.update
          - compute.firewalls.delete
          - compute.instances.get
          - compute.instances.setLabels
          - compute.instances.stop
          - compute.instances.deleteAccessConfig
          - compute.networks.updatePolicy
          - compute.subnetworks.get
          - compute.subnetworks.setPrivateIpGoogleAccess
          - compute.subnetworks.update
          - container.clusters.update
          - gkemulticloud.awsNodePools.update
          - storage.buckets.getIamPolicy
          - storage.buckets.setIamPolicy

  - name: yaelServiceAccount1
    type: iam.v1.serviceAccount
    properties:
      accountId: yaelServiceAccount1
      displayName: yaelServiceAccount1

  - name: yaelRoleBinding1
    type: gcp-types/cloudresourcemanager-v1:virtual.projects.iamMemberBinding
    properties:
      resourceRef:
        apiVersion: iam.cnrm.cloud.google.com/v1beta1
        kind: ServiceAccount
        name: projects/chkp-gcp-yaelel-box/serviceAccounts/yaelServiceAccount1@chkp-gcp-yaelel-box.iam.gserviceaccount.com
      bindings:
        - role: roles/remediation
          members:
            - serviceAccount:yaelServiceAccount1@chkp-gcp-yaelel-box.iam.gserviceaccount.com

  - name: yaelFunction1
    type: gcp-types/cloudfunctions-v1:projects.locations.functions
    properties:
      parent: projects/chkp-gcp-yaelel-box/locations/us-central1
      function: yaelFunction1
      runtime: python37
      sourceArchiveUrl: gs://test_yael_1/yael4.zip
      httpsTrigger: {}
      ingressSettings: ALLOW_ALL
      serviceAccountEmail: $(ref.yaelServiceAccount1.email)
      labels:
        created-by: deployment-manager
      entryPoint: main

  - name: yaelbucket-a
    type: storage.v1.bucket
    properties:
      bucket: yaelBucket1
      project: chkp-gcp-yaelel-box
