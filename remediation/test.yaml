resources:
  - name: yaelRole2
    type: gcp-types/iam-v1:projects.roles
    properties:
      parent: projects/chkp-gcp-yaelel-box
      roleId: yaelRole2
      role:
        title: yaelRole2
        description: Custom role with specific permissions
        includedPermissions:
          - cloudsql.instances.get
          - cloudsql.instances.update
          - compute.firewalls.delete
          - compute.instances.get
          - compute.instances.setLabels
          - compute.instances.stop
          - compute.instances.deleteAccessConfig
          - compute.networks.updatePolicy
          - compute.subnetworks.get
          - compute.subnetworks.setPrivateIpGoogleAccess
          - compute.subnetworks.update
          - container.clusters.update
          - gkemulticloud.awsNodePools.update
          - storage.buckets.getIamPolicy
          - storage.buckets.setIamPolicy

  - name: yaelServiceAccount1
    type: iam.v1.serviceAccount
    properties:
      accountId: yaelServiceAccount1
      displayName: yaelServiceAccount1

  - name: copyFromAwsToGcs
    type: gcp-types/storage-v1:buckets.objects
    properties:
      bucket: your-gcs-bucket-name
      name: yael.zip
      sourceBucket: yael-test-1
      sourceObject: yael.zip

  - name: yaelFunction1
    type: gcp-types/cloudfunctions-v1:projects.locations.functions
    properties:
      parent: projects/chkp-gcp-yaelel-box/locations/us-central1
      function: yaelFunction1
      runtime: python37
      sourceArchiveUrl: gs://your-gcs-bucket-name/yael.zip
      httpsTrigger: {}
      ingressSettings: ALLOW_ALL
      serviceAccountEmail: $(ref.yaelServiceAccount1.email)
      labels:
        created-by: deployment-manager
      entryPoint: main
